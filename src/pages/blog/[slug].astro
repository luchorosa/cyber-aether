---
import {getCollection, type CollectionEntry} from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Main from "../../components/Main.astro";

export const getStaticPaths = async () => {
    const posts = await getCollection("posts")
    const paths = posts.map(post => {
        return {
            params: {
                slug: post.slug
            },
            props: {
                post
            }
        }
    })
    return paths;
}

type Props = {
    post: CollectionEntry<"posts">
}

const {post} = Astro.props;
const {Content} = await post.render();
const fmt = (d: Date) => d.toISOString().slice(0, 10);
---

<Layout title={post.data.title}>
	<Main>
        <div class="max-w-max px-2 py-1 rounded-md bg-[#24093F] text-violet-300 text-xs">
            {fmt(post.data.date)}
        </div> 
        <h1 class="title text-2xl md:text-3xl">{post.data.title}</h1>
        <div class="title prose dark:prose-invert
                    prose-h2:font-bold prose-h2:text-xl prose-h2:text-slate-100
                    prose-a:text-violet-600 leading-relaxed prose-img:rounded-xl
                    prose-headings:underlinedark:prose-invert prose-xl overflow-visible relative mb-20">
            <Content/>
        </div>
	</Main>
</Layout>
